<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>备份管理面板</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div class="topbar">备份管理面板</div>
  <div class="container">
    <div class="left">
      <div class="panel card">
        <h3>快速选择（横向）</h3>
        <div class="quick-row">
          <div class="quick-col">
            <label>源目录（可多选，选择好后点击“加入已选”）</label>
            <select id="srcRootSelect" class="root-select"></select>
            <select id="srcSubSelect" class="sub-select"></select>
            <div class="btn-row-small">
              <button id="chooseSrcBtn" class="small">加入已选（源）</button>
            </div>
          </div>
          <div class="quick-col">
            <label>目标目录（选择后点击“加入已选”）</label>
            <select id="dstRootSelect" class="root-select"></select>
            <select id="dstSubSelect" class="sub-select"></select>
            <div class="btn-row-small">
              <button id="chooseDstBtn" class="small">加入已选（目标）</button>
            </div>
          </div>
        </div>
        <div class="hint">注：如果某映射没有出现在下拉，请在 docker-compose 中把宿主机目录以 volumes 映射到容器并重启容器。</div>
      </div>

      <div class="panel card">
        <h3>已选择（源 / 目标）</h3>
        <div id="selectedWrap" class="selected-wrap">
          <div class="sel-col">
            <h4>来源 (Sources)</h4>
            <div id="srcList" class="pills"></div>
          </div>
          <div class="sel-col">
            <h4>目标 (Destinations)</h4>
            <div id="dstList" class="pills"></div>
          </div>
        </div>

        <div class="controls">
          <label>配对方式：
            <select id="pairMode">
              <option value="index">按索引配对（逐项对应）</option>
              <option value="single">单目标应用于所有来源</option>
            </select>
          </label>
          <div class="pair-explain" id="pairExplain">
            <strong>说明：</strong>
            <div id="explainText">按索引配对：第1个源与第1个目标配对，第2个源与第2个目标依此类推。<br/>
            单目标应用于所有来源：选择一个目标（第一个目标），它将被应用到所有选择的源目录，适合将多个源备份到同一个目标。</div>
          </div>

          <div class="btn-row">
            <button id="addPairs" class="primary">添加任务（一键）</button>
            <button id="clearSelected" class="danger">清空已选</button>
          </div>
        </div>
      </div>

      <div class="panel card">
        <h3>任务队列</h3>
        <ul id="queue"></ul>
      </div>
    </div>

    <div class="right">
      <div class="panel card">
        <h3>运行日志</h3>
        <pre id="log" class="log"></pre>
      </div>
    </div>
  </div>

  <script src="/static/js/app.js"></script>
</body>
</html>
